iaas : aws-ec시스템=> 환경설정 다해야한다.서버컨트롤가능/까다로움/
elastic - binstock?eb=> aws의 paas버전? 
paas  ;플랫폼 헤로쿠 / vercel(nextjs) : 서버컨트롤불가능/빠르게빌드가능


# Cloud와 Deployment의 의미를 각 각 알고, 내 코드를 남에게 배포할 수 있다.

클라우드 컴퓨팅이 무엇인지 설명할 수 있다.
Deployment의 의미를 이해할 수 있다.
코드를 남에게 배포할 수 있다.
# 사용하는 서비스들의 특징과 사용해야 하는 이유를 이해할 수 있다.

RDS와 EC2에 설치된 데이터베이스의 차이를 이해할 수 있다.
S3의 높은 가용성과 안정성을 이해할 수 있다.
CloudFront의 콘텐츠 로딩시간 단축의 효과들을 이해할 수 있다. (advanced)
Route53을 이용해 요청을 쉽고 안전하게 원하는곳으로 보낼수 있음을 이해할 수 있다. (advanced)

# 커스텀 도메인을 이용해 요청을 원하는 곳으로 라우팅할 수 있다. (advanced)
DNS가 무엇인지 이해할 수 있다. (advanced)
커스텀 도메인을 이용해 인증서를 발급받고 SSL을 적용할 수 있다. (advanced)

***

## 서버는 확장하기 어렵다! 공간적으로나 비용, 인력쪽으로나 한계가 있다.

1. 주기적인 관리 필요 : 고장이나 연결이 끊기는 경우 인력 및 비용필요
2. 공간의 한계 : 무한 증설 불가능

위의 단점을 극복하는 클라우드의 등장

클라우드 : 

* 데이터센터 => 서버의 자원과 공간 및 네트워크 환경제공( 온프레미스 환경)

1. 클라우드는 가상의 컴퓨터를 대여하는 것으로 데이터센터와는 약간 다른점이 있다. : 가상화기술의 발전으로부터 비롯됨
2. 클라우드의 장점으로는 필요할 때 마다 컴퓨팅 능력을 유연하게 조절할 수 있고, 고정적인 비용이 들어가는 온프레미스 환경과는 달리 사용한 만큼의 요금만 지불
3. 컴퓨터의 스냅샷을 이용해 다른 컴퓨터로 이주(migration) 가능

하지만 단점이 존재 
1. 유지보수가 클라우드 제공자에게 종속됨 
2. 운영환경이 사업자에게 종속되므로 백엔드 구성 자체가 특정 회사의 기술로만 구성해야된다는 점 . 이 역시 마찬가지로 종속된다는 특징
3. 따라서 제공자가 제공하는 기술을 익힐 필요가 있음

클라우드 서비스 형태 3가지 

1. SaaS-Sofrware as a service : 클라우드 제공자가 당장 사용가능한 소프트웨어를 제공하는 경우
2. IaaS-Infrastructure as a Service : 클라우드 제공자가 가상 컴퓨터까지 제공하는 경우
3. PaaS-Platform as a Srvice : 제공자가 DB, 개발플랫폼까지 제공하는 경우

***

# 배포!

* 우리가 개발한 서비스를 사용자들이 이용가능하도록 하는 과정
* 보통 4가지 단계 Development-Intergration-Staging-Production

1. Development : Local에서 코드 작성 및 테스트, 더미데이터 이용
2. Intergration : 각자의 코드를 합치는 과정, 코드간 conflict확인
3. Staging : Production 단계와 유사한 환경에서 테스트 진행. 원하는 대로 빌드돼었는지 확인
4. Production : 개발된 서비스 출시

* Development환경과 Production 환경은 서로 다를 수 있다. 나만 사용하는 것이 아니고 여러명이 프로젝트에 작업하므로 개발 툴의 버전도 다르고, 인증정보나 DB에 접근하기 위해 사용하는 엔드포인트도 제각각.
* 따라서 환경설정을 코드와 분리하는 것이 매우 중요하다!!!
* 작성한 코드가 다른 환경에서 정상작동하게 하려면 설정을 환경변수에 저장해야 함. docker같은 가상화도구는 환경 자체를 메타데이터로 담아서 모든 개발환경을 통일 시킨다.

***

# EC2

* AWS에서 제공하는 클라우드 컴퓨팅 서비스 => 인터넷을 통해 서버, 스토리지, 데이터베이스 등으 컴퓨팅서비스르 제공하는 서비스 => 가상멈퓨터 한대 빌리는 것 
* 구성에 필요한 시간이 짧고, AMI를 통해서 용도에 따라 다양한 운영체제에 대한 선택가능
* CPU와 RAM용향도 손쉽게 구성가능.
* AWS에서 인스턴스를 생성하고 그 인스턴스는 컴퓨터 한대와 다름이 없다. 
* AMI는 소프트웨어 구성이 기재된 템플릿이다. 이미지 종류로는 단순히 운영체제만 깔려있는 템플릿을 선택할 수 있고, 특정 런타임이 설치된 템플릿을 제공하는 경우도 있음. 

* 정리하자면 AWS EC2 인스턴스를 생성한다는 것은 AMI를 토대로 운영체제, CPU, RAM 혹은 런타임 등이 구성된 컴퓨터를 빌린다는 것 .

***

# RDS

Relational Database Service  : AWS에서 제공하는 관계형 데이터베이스 서비스
EC2 인스턴스에 데이터베이스를 설치해서 데이터를 관리할 땐 직접 관리해줘야 하고 필요에 따라 데이터베이스의 규모를 확장하기 어렵다. 데이터가 유실되서나 정상작동하지 못할 가능성도 크다. 
하지만 RDS는 DB관리에 대해서 자동화가 이루어지기 때문에 유지보수 측면에서 유리하며, 초기 설정만 잘 해주면 데이터만 관리해주면 된다. 다양한 DB엔진을 제공해주며 사용처에 맞게 엔진을 골라서 이용할 수 있다.

***

# S3
* Simple Storage Serevice : AWS에서 제공하는 클라우드 스토리지 서비스
* 접근성이 좋고 높은 확장성은 가지고 있으며, 사용량 만큼만 비용을 지불한다.
* 내구성도 좋다.
* 리전이란 AWS에서 클라우드 서비스를 제공하기 위해서 운영하는 물리적인 서버의 위치를 말하고, 가용 영역(Availability Zone)이란 각 리전 안에 존재하는 데이터 센터(IDC)를 말한다. 각 리전에 여러개의 가용영역이 존재하기 때문에, 한곳의 가용영역에 사고가 발생하더라도 다른 가용역역에 백업된 데이터를 활용할 수 있어 높은 안정성을 제공해준다.

* 다양한 스토리지클래스를 제공해준다. standard, glacier, Standard-IA, One Zone-IA, S3 Glacier Deep Archive 등등
*  Standard:데이터로의 빠른접근, 처리속도빠름, 대신 오래보관엔 불리= >높은 보관비용/Glacier: 액세스속도는 느리지만 보관비용 저렴.

* 정적 웹사이트 호스팅 가능 : 미리 저장된 파일을 그대로 사용자에게 전달. 
* 웹 호스팅(Web Hosting)이란 뭘까요? 웹 호스팅이란 서버의 한 공간을 임대해주는 서비스를 뜻함.

***

* **S3에서는 버킷이 사용자들이 웹 페이지를 배포할 수 있는 공간을 제공**
* 버킷에 정적 웹 페이지를 업로드하고 정적 웹 사이트 호스팅 용도로 구성을 바꾸시면, 다른 사용자가 버킷에 저장된 정적 웹 페이지에 접근할 수 있다.
* 여기서 버킷이란 S3에 저장되는 파일들이 담기는 곳. 즉 파일의 최상위 디렉터리이다. S3의 모든 파일은 버킷안에 저장돼야하고, 버킷에는 한도없이 파일을 저장가능. 각 버킷은 고유 이름을 가지고 있으며 이 이름은 해당리전에서 유일해야한다. 또한 버킷 정책을 설정해서 다른유저의 접근권한 수정/액세스권한 부여 가능
* 버킷에 담기는 파일을 객체라고 한다. 키-밸류 형태. 
* 객체는 파일과 메타데이터로 구성되는데 파일은 키밸류 형태로 데이터를 저장하고 밸류엔 실제 데이터를 저장한다. 밸류가 가질수 있는 최대 크기는 5TB.
* 메타데이터는 객체의 생성일, 크기, 유형과 같은 객체에 대한 정보가 담긴 데이터입니다. 객체를 설명하는 데이터.
* 모든 객체는 고유한 URL을 가지고 있으며 주소는 http://[버킷의 이름].S3.amazonaws.com/[객체의 키]의 형태. 이를 통해서도 접근이 가능하다.


***

# DeplayStrategy

* 사용자들에게 클라이언트를 어떻게 제공하고 요청을 처리할 서버와 데이터를 저장할 DB는 어떻게 제공할까?

* **client**
* S3를 통해 제공 가능.클라이언트를 제공하기 위해선 앱을 정적파일로 빌드해서 제공해야 한다. 따라서 S3를 이용해 클라이어트르 배포한다.
* 배포를 위해 빌드를 진행해야 한다. 빌드를 통해 불필요한 데이터를 없애고 분산된 데이터들을 통합 및 압축해서 배포에 최적화된 상태를 만드는 것이 중요함. 이로서 데이터 용량이 줄어들고 웹사이트의 로딩 속도가 빨라진다. 
* React의 경우 npm run build를 통해 정적파일 형태의 결과물을 만들어낸 후 배포하면 된다. 
* 지구의 모든 지역에 빠르게 전달하기 위해선 AWS에서 제공하는 CDN서비스인 CloudFront를 통해서 각지의 데이터 센터에 데이터를 분산시킨 후 가장 가까운 지역에서 데이터를 주는 방식으로 진행할 수 있다. 
* **Server**
* EC2 서비스를 통해 손쉽게 서버를 구성하고 서비스를 제공할 수 있다.
* **DataBase**
* AWS에선 DB특화 서비스인 RDS서비스를 제공하며 이를 통해 즉시 DB를 사용가능.
* RDS 서비스를 이용하여 EC2를 통해 배포된 Server Application의 데이터를 저장, 제공하는 데이터베이스를 배포할 수 있다.
* **Domain**
* S3, EC2를 이용해서 배포된 서비스는 IP주소 또는 AWS에서 제공하는 긴 도메인 주소를 통해 접근하게 된다. AWS에서 제공하는 Route53서비스를 이용하면 직관적인 도메인 주소를 통해 서비스에 접근이 가능하게 해준다.




***





# Deploy Sprint

## EC2

* SSH(Secure Shell) Protocol은 PC와 PC가 인터넷 같은 Public Network를 통해 서로 통신할 때 보안상 안전하게 통신을 하기위한 프로토콜이다.
* EC2 키파일(.pem 확장자)은 AWS에서 빌린 PC를 원격으로 제어할 때 SSH통신을 위해 필요한 Private Key가 기록된 파일이다. 
* EC2인스턴스 생성시 인스턴스 ID를 통해 인스턴스를 구분 가능하다. 콘솔의 인스턴스 탭에서 인스턴스 ID, 상태등을 확인 가능하다. 구분을 위해 인스턴스 이름을 편집할 수 있음. 
* EC2인스턴스에 원격 접속해서 인스턴스를 제어할 수 있는데, 인스턴스에 원격 접속시 키페어파일이 필요하다. 

***

### 인스턴스 연결 - SSH
1.  콘솔의 인스턴스 탭에서 상단의 연결버튼으로 연결에 들어간다.
2. 로컬 터미널에서 SSH프로토콜을 이용해 인스턴스와 연결이 가능한데, 이 전에 키페어파일의 권한을 수정해줘야 인스턴스가 거부를 하지 않는다.
3. 이를 위해 chmod(change mode)명령어로 권한을 수정 : 4읽기, 2쓰기, 1사용권한: 이 세개의 숫자의 합으로 권한을 부여한다. 이진법인듯 111,101,011 등.
4. chmod 뒤에 오는 세개의 숫자는 순서대로 소유자/그룹/전체 를 의미한다. 예를 들어 chmod 400 filename.pem 은 키페어파일의 권한을 나만 읽을 수 있도록 권한을 부여해준다.
5. 권한 수정 후 ssh명령어로 접속을 시작하면 CLI창으로 제어할 수 있다.
6. npm i, ls cd, git clone등 원하는 명령어로 제어. 인스턴스에 연결해서 서버를 실행할 땐 관리자 권한이 필요함. ex) sudo npm start
7. 이후 인스턴스의 퍼블릭 IPv4 DNS 주소로 접근하면 보안그룹을 설정하기 전이기 때문에 받아와지지 않는다.

***

### Security Group
1. 보안그룹이란 인스턴스로 들어가고 인스턴스에서 나가는 트래픽에 대한 가상 방화벽
2. 인스턴스로 들어가는 트래픽은 인바운드, 나가는 트래픽은 아웃바운드라고 한다.
3. 보안 그룹 탭에서 규칙 설정가능 => 보안그룹 ID의 인바운드,아웃바운드 규칙 편집


***

* **인바운드 규칙**

* 인바운드 규칙은 EC2인스턴스로 들어오는 트래픽에 대한 규칙이다. 호스팅
* 인바운드 규칙에 허용되지 않은 규칙은 인스턴스로 접근하지 못하도록 필터링 된다.
* EC2 인스턴스를 생성하면 기본적으로 SSH 접속을 위한 SSH 규칙만 생성되어 있다.
* EC2 인스턴스에서 실행중인 서버가 인터넷에서 요청을 받을수 있도록 인바운드 규칙을 편집해야한다 => 유형을 http, 소스를 모든 IP에서 접근 가능하도록 설정.// 소스는 보안그룹/특정IP주소일 수도 있다.


* **아웃바운드 규칙**
* 아웃바운드 규칙은 EC2 인스턴스에서 나가는 트래픽에 대한 규칙이다.
* EC2 인스턴스를 생성하면 기본적으로 나가는 모든 트래픽을 허용.


## PM2

* 프로세스가 뭐냐 : 컴퓨터 프로그램이 실행될 때 프로그램 실행에 필요한 내용이 컴퓨터 메모리에 적재된다는 의미를 담는다. 실행 중인 프로그램 정도의 의미.
* 터미널에서 ssh프로세스가 실행되고 있을 때 터미널을 강제종료하면 터미널에 띄워져 있던 ssh프로세스가 강제 종료되고 EC2상의 프로세스도 같이 종료된다. 이에 따라 EC2에서 돌아가는 node 프로세스도 강제종료된다.
* node 프로세스가 ssh 접속 여부와는 상관없이 늘 실행되게 하려면 어떻게 해야할까?
* 백그라운드 실행으로 해야한다. => `&`라는 키워드를 명령 뒤에 붙여 백그라운드 실행으로 만들어줄 수 있다.
* Output으로 등장하는 29364와 같은 숫자는 PID, 즉 프로세스 ID이다. PID를 알면, fg 명령을 통해 실행 중인 프로그램을 포어그라운드?로 부를 수도 있고, kill 명령을 통해 백그라운드에서 실행중인 프로세스를 종료할 수도 있습니다.
* 이러한 명령어 대신 프로세스를 관리해주는 프로그램을 사용하면 편하다. 이게 바로 Process Manage => PM2


* 백그라운드 실행뿐만 아니라 슬라이드에 언급된 것처럼, 다양하고 강력한 기능을 제공합니다.
* Hot Reload와 같이 프로그램이 변경될 때 자동으로 재시작하게 도와준다거나, 프로그램 실행 중 에러가 나서 서버가 종료되면, 다시 자동으로 실행시켜주는 기능을 제공.
* 서버 운영에서는 필수라고 할 수 있는 로그 관리를 좀 더 전문적으로 할 수 있고 클러스터 모드와 같이 멀티코어 CPU를 최대한 활용하는 옵션도 있다.



## 정적 웺이트 

